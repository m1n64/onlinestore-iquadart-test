import{_ as g,g as u}from"./cookies-adc1f27f.js";import{r as z,c as B,w as S,a as y,o as r,b as _,d as f,e as t,f as k,t as i,g as m,v as h,n as p,F as x}from"./app-dbf303d8.js";import{_ as C}from"./TextInput-538f18e4.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import"./AuthenticatedLayout-c3f2992c.js";const A={name:"Users",components:{TextInput:C,AuthWithBgLayout:g},setup(){return{roles:z([{role:"U",name:"User"},{role:"A",name:"Admin"}])}},props:{users:Array},methods:{setNewUserState(s,o){this.$props.users[s]=o},getColorByRole(s){switch(s){default:case"U":return"text-green-600";case"M":return"text-blue-600";case"A":return"text-red-600"}},changeStatus(s,o){const n=this.$refs["role-select-"+s][0].value;axios.post("/api/admin/setRole/"+s,{role:n},{headers:{Authorization:`Bearer ${u("__token")}`}}).then(a=>{a.data.success&&this.setNewUserState(o,a.data.data)})},setBanStatus(s,o,n){axios.post("/api/admin/setBanStatus/"+s,{status:n},{headers:{Authorization:`Bearer ${u("__token")}`}}).then(a=>{a.data.success&&this.setNewUserState(o,a.data.data)})},setMaxFilesSize(s,o){const n=this.$refs["max-files-size-"+s][0].value;axios.post("/api/admin/setMaxFilesSize/"+s,{max_size:n},{headers:{Authorization:`Bearer ${u("__token")}`}}).then(a=>{a.data.success&&this.setNewUserState(o,a.data.data)})}}},U={class:""},$={class:"text-gray-600"},M={class:"text-gray-700"},N={class:"my-2"},F=["value","selected"],R=["onClick"],L={class:""},W=["onClick"],D=["value"],I=["onClick"];function T(s,o,n,a,V,d){const v=y("AuthWithBgLayout");return r(),B(v,null,{default:S(()=>[(r(!0),_(x,null,f(n.users,(e,c)=>(r(),_("div",{key:c,class:"flex justify-between border-b-2 border-solid border-b-gray-300 my-4"},[t("div",null,[t("div",U,[k(i(e.id)+". "+i(e.name)+" ",1),m(t("span",$,"(you)",512),[[h,e.id===s.$page.props.auth.user.id]])]),t("div",M,i(e.email),1),t("div",{class:p(d.getColorByRole(e.role))},"Role: "+i(e.role_name),3),t("div",{class:p(e.is_banned?"font-bold text-red-600":"")},"Is banned: "+i(!!e.is_banned),3),t("div",null,"Max files size: "+i(e.max_files_size===-1?"Unlimited":e.max_files_size)+" MB",1),t("div",null,"Current files size: "+i(e.files_size)+" MB",1)]),m(t("div",null,[t("div",N,[t("select",{ref_for:!0,ref:"role-select-"+e.id},[(r(!0),_(x,null,f(a.roles,(l,b)=>(r(),_("option",{key:b,value:l.role,selected:e.role===l.role},i(l.name),9,F))),128))],512),t("button",{class:"btn main",onClick:l=>d.changeStatus(e.id,c)},"Save",8,R)]),t("div",L,[t("button",{class:"btn sub",onClick:l=>d.setBanStatus(e.id,c,!e.is_banned)},i(e.is_banned?"Unban":"Ban"),9,W)]),m(t("div",null,[t("input",{ref_for:!0,ref:"max-files-size-"+e.id,type:"number",step:"0.01",class:"my-2 block w-3/4",placeholder:"Max file size",value:e.max_files_size},null,8,D),t("button",{class:"btn main",onClick:l=>d.setMaxFilesSize(e.id,c)},"Set max storage size (MB)",8,I)],512),[[h,e.role!=="A"]])],512),[[h,e.id!==s.$page.props.auth.user.id]])]))),128))]),_:1})}const J=w(A,[["render",T]]);export{J as default};
